<div class="container">
  <form action="/">
    <select class="form-select" name="sort" id="sort" onchange="this.form.submit()">
      <option value="0">所有類別</option>
      {{#each categoryList}}
      <option value="{{this.id}}" {{#if this.selected}}selected{{/if}}>{{this.name}}</option>
      {{/each}}
    </select>
  </form>

  <div class="total" id="totalAmount">
    <h5 class="fw-bold">總金額:<span class="totalAmount" id="totalAmount" style="color:#612b5b;">{{totalAmount}}</h5>
  </div>
  {{#each records}}
  <table class="table table-hover">
    <tbody>
      <tr class="table-active">
        <th scope="row" id="index-icon"><i class="{{Icon this.category}}"></i></th>
        <td>
          <div>
            <p id="index-name">{{this.name}}</p>
            <small id="index-date">{{dateFormat this.date}}</small>
          </div>
        </td>
        <td id="index-amount">{{this.amount}}</td>
        <td class="edit-delete-btn">
          <a class="btn btn-success" href="./records/{{ this._id }}/edit">修改</a>
          <form action="./records/{{ this._id }}?_method=DELETE" method="POST" style="display: inline">
            <button class="btn btn-danger" type="submit">刪除</button>
          </form>
      </tr>
    </tbody>
  </table>
  {{/each}}
  <a href="/records/new" class="btn btn-white text-danger" style="border-color:rgb(4, 31, 48);">新增支出</a>
</div>

<script src='../utility/time.js'></script>